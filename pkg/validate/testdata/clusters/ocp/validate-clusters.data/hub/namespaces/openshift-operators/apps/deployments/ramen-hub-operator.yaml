apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    deployment.kubernetes.io/revision: "1"
  creationTimestamp: "2025-09-02T15:09:44Z"
  generation: 6
  labels:
    app: ramen-hub
    control-plane: controller-manager
    olm.deployment-spec-hash: 13fzAiIW6rezgpGhGHfYTcTa7M5gUOLe2ScV4j
    olm.managed: "true"
    olm.owner: odr-hub-operator.v4.20.0-78.stable
    olm.owner.kind: ClusterServiceVersion
    olm.owner.namespace: openshift-operators
    operators.coreos.com/odr-hub-operator.openshift-operators: ""
  managedFields:
  - apiVersion: apps/v1
    fieldsType: FieldsV1
    fieldsV1:
      f:metadata:
        f:labels:
          .: {}
          f:app: {}
          f:control-plane: {}
          f:olm.deployment-spec-hash: {}
          f:olm.managed: {}
          f:olm.owner: {}
          f:olm.owner.kind: {}
          f:olm.owner.namespace: {}
          f:operators.coreos.com/odr-hub-operator.openshift-operators: {}
        f:ownerReferences:
          .: {}
          k:{"uid":"d30c1562-95e2-46a9-81dd-c215308ec0c5"}: {}
      f:spec:
        f:progressDeadlineSeconds: {}
        f:replicas: {}
        f:revisionHistoryLimit: {}
        f:selector: {}
        f:strategy:
          f:rollingUpdate:
            .: {}
            f:maxSurge: {}
            f:maxUnavailable: {}
          f:type: {}
        f:template:
          f:metadata:
            f:annotations:
              .: {}
              f:alm-examples: {}
              f:capabilities: {}
              f:createdAt: {}
              f:features.operators.openshift.io/cnf: {}
              f:features.operators.openshift.io/cni: {}
              f:features.operators.openshift.io/csi: {}
              f:features.operators.openshift.io/disconnected: {}
              f:features.operators.openshift.io/fips-compliant: {}
              f:features.operators.openshift.io/proxy-aware: {}
              f:features.operators.openshift.io/tls-profiles: {}
              f:features.operators.openshift.io/token-auth-aws: {}
              f:features.operators.openshift.io/token-auth-azure: {}
              f:features.operators.openshift.io/token-auth-gcp: {}
              f:kubectl.kubernetes.io/default-container: {}
              f:olm.operatorGroup: {}
              f:olm.operatorNamespace: {}
              f:olm.skipRange: {}
              f:olm.targetNamespaces: {}
              f:operatorframework.io/properties: {}
              f:operatorframework.io/suggested-namespace: {}
              f:operators.openshift.io/infrastructure-features: {}
              f:operators.openshift.io/valid-subscription: {}
              f:operators.operatorframework.io/builder: {}
              f:operators.operatorframework.io/project_layout: {}
            f:labels:
              .: {}
              f:app: {}
              f:control-plane: {}
          f:spec:
            f:containers:
              k:{"name":"kube-rbac-proxy"}:
                .: {}
                f:args: {}
                f:env:
                  .: {}
                  k:{"name":"OPERATOR_CONDITION_NAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                f:image: {}
                f:imagePullPolicy: {}
                f:name: {}
                f:ports:
                  .: {}
                  k:{"containerPort":8443,"protocol":"TCP"}:
                    .: {}
                    f:containerPort: {}
                    f:name: {}
                    f:protocol: {}
                f:resources:
                  .: {}
                  f:limits:
                    .: {}
                    f:cpu: {}
                    f:memory: {}
                  f:requests:
                    .: {}
                    f:cpu: {}
                    f:memory: {}
                f:terminationMessagePath: {}
                f:terminationMessagePolicy: {}
              k:{"name":"manager"}:
                .: {}
                f:args: {}
                f:command: {}
                f:env:
                  .: {}
                  k:{"name":"OPERATOR_CONDITION_NAME"}:
                    .: {}
                    f:name: {}
                    f:value: {}
                  k:{"name":"POD_NAMESPACE"}:
                    .: {}
                    f:name: {}
                    f:valueFrom:
                      .: {}
                      f:fieldRef: {}
                f:image: {}
                f:imagePullPolicy: {}
                f:livenessProbe:
                  .: {}
                  f:failureThreshold: {}
                  f:httpGet:
                    .: {}
                    f:path: {}
                    f:port: {}
                    f:scheme: {}
                  f:initialDelaySeconds: {}
                  f:periodSeconds: {}
                  f:successThreshold: {}
                  f:timeoutSeconds: {}
                f:name: {}
                f:readinessProbe:
                  .: {}
                  f:failureThreshold: {}
                  f:httpGet:
                    .: {}
                    f:path: {}
                    f:port: {}
                    f:scheme: {}
                  f:initialDelaySeconds: {}
                  f:periodSeconds: {}
                  f:successThreshold: {}
                  f:timeoutSeconds: {}
                f:resources:
                  .: {}
                  f:limits:
                    .: {}
                    f:cpu: {}
                    f:memory: {}
                  f:requests:
                    .: {}
                    f:cpu: {}
                    f:memory: {}
                f:securityContext:
                  .: {}
                  f:allowPrivilegeEscalation: {}
                f:terminationMessagePath: {}
                f:terminationMessagePolicy: {}
                f:volumeMounts:
                  .: {}
                  k:{"mountPath":"/config"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
                  k:{"mountPath":"/etc/pki/ca-trust/extracted/pem"}:
                    .: {}
                    f:mountPath: {}
                    f:name: {}
                    f:readOnly: {}
            f:dnsPolicy: {}
            f:restartPolicy: {}
            f:schedulerName: {}
            f:securityContext:
              .: {}
              f:runAsNonRoot: {}
            f:serviceAccount: {}
            f:serviceAccountName: {}
            f:terminationGracePeriodSeconds: {}
            f:volumes:
              .: {}
              k:{"name":"ramen-manager-config-vol"}:
                .: {}
                f:configMap:
                  .: {}
                  f:defaultMode: {}
                  f:name: {}
                f:name: {}
              k:{"name":"ramen-manager-trustedca-vol"}:
                .: {}
                f:configMap:
                  .: {}
                  f:defaultMode: {}
                  f:items: {}
                  f:name: {}
                f:name: {}
    manager: olm
    operation: Update
    time: "2025-09-07T17:03:46Z"
  - apiVersion: apps/v1
    fieldsType: FieldsV1
    fieldsV1:
      f:metadata:
        f:annotations:
          .: {}
          f:deployment.kubernetes.io/revision: {}
      f:status:
        f:availableReplicas: {}
        f:conditions:
          .: {}
          k:{"type":"Available"}:
            .: {}
            f:lastTransitionTime: {}
            f:lastUpdateTime: {}
            f:message: {}
            f:reason: {}
            f:status: {}
            f:type: {}
          k:{"type":"Progressing"}:
            .: {}
            f:lastTransitionTime: {}
            f:lastUpdateTime: {}
            f:message: {}
            f:reason: {}
            f:status: {}
            f:type: {}
        f:observedGeneration: {}
        f:readyReplicas: {}
        f:replicas: {}
        f:updatedReplicas: {}
    manager: kube-controller-manager
    operation: Update
    subresource: status
    time: "2025-09-07T17:04:03Z"
  name: ramen-hub-operator
  namespace: openshift-operators
  ownerReferences:
  - apiVersion: operators.coreos.com/v1alpha1
    blockOwnerDeletion: false
    controller: false
    kind: ClusterServiceVersion
    name: odr-hub-operator.v4.20.0-78.stable
    uid: d30c1562-95e2-46a9-81dd-c215308ec0c5
  resourceVersion: "9756732"
  uid: 4f314add-272d-45d0-a3c0-1a87d729f548
spec:
  progressDeadlineSeconds: 600
  replicas: 1
  revisionHistoryLimit: 1
  selector:
    matchLabels:
      app: ramen-hub
      control-plane: controller-manager
  strategy:
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
    type: RollingUpdate
  template:
    metadata:
      annotations:
        alm-examples: |-
          [
            {
              "apiVersion": "ramendr.openshift.io/v1alpha1",
              "kind": "DRCluster",
              "metadata": {
                "name": "east"
              },
              "spec": {
                "region": "east",
                "s3ProfileName": "s3-profile-of-east"
              }
            },
            {
              "apiVersion": "ramendr.openshift.io/v1alpha1",
              "kind": "DRCluster",
              "metadata": {
                "name": "east1"
              },
              "spec": {
                "cidrs": [
                  "192.168.39.45/32"
                ],
                "clusterFence": "ManuallyFenced",
                "region": "east",
                "s3ProfileName": "s3-profile-of-east1"
              }
            },
            {
              "apiVersion": "ramendr.openshift.io/v1alpha1",
              "kind": "DRPlacementControl",
              "metadata": {
                "name": "drplacementcontrol-sample",
                "namespace": "application-namespace"
              },
              "spec": {
                "drPolicyRef": {
                  "name": "drpolicy-sample"
                },
                "kubeObjectProtection": {
                  "captureInterval": "1m",
                  "captureOrder": [
                    {
                      "includedResources": [
                        "ConfigMap",
                        "Secret"
                      ],
                      "name": "config"
                    },
                    {
                      "excludedResources": [
                        "ConfigMap",
                        "Secret"
                      ],
                      "includeClusterResources": true,
                      "name": "everything"
                    }
                  ],
                  "recoverOrder": [
                    {
                      "backupName": "config",
                      "includedResources": [
                        "ConfigMap",
                        "Secret"
                      ]
                    },
                    {
                      "backupName": "everything",
                      "includedResources": [
                        "*"
                      ]
                    }
                  ]
                },
                "placementRef": {
                  "kind": "PlacementRule",
                  "name": "application-placement-rule"
                },
                "preferredCluster": "east",
                "pvcSelector": {
                  "matchLabels": {
                    "any-pvc-label": "value"
                  }
                }
              }
            },
            {
              "apiVersion": "ramendr.openshift.io/v1alpha1",
              "kind": "DRPolicy",
              "metadata": {
                "name": "drpolicy-sample"
              },
              "spec": {
                "drClusters": [
                  "east",
                  "west"
                ],
                "replicationClassSelector": {
                  "matchLabels": {
                    "class": "ramen-replication-class"
                  }
                },
                "schedulingInterval": "1h",
                "volumeSnapshotClassSelector": {
                  "matchLabels": {
                    "class": "ramen-snapshot-class"
                  }
                }
              }
            },
            {
              "apiVersion": "ramendr.openshift.io/v1alpha1",
              "kind": "DRPolicy",
              "metadata": {
                "name": "metrodr-drpolicy-sample"
              },
              "spec": {
                "drClusters": [
                  "east1",
                  "east2"
                ],
                "replicationClassSelector": {},
                "schedulingInterval": {},
                "volumeSnapshotClassSelector": {}
              }
            }
          ]
        capabilities: Seamless Upgrades
        createdAt: "2025-09-02T00:03:55Z"
        features.operators.openshift.io/cnf: "false"
        features.operators.openshift.io/cni: "false"
        features.operators.openshift.io/csi: "true"
        features.operators.openshift.io/disconnected: "true"
        features.operators.openshift.io/fips-compliant: "true"
        features.operators.openshift.io/proxy-aware: "true"
        features.operators.openshift.io/tls-profiles: "false"
        features.operators.openshift.io/token-auth-aws: "false"
        features.operators.openshift.io/token-auth-azure: "false"
        features.operators.openshift.io/token-auth-gcp: "false"
        kubectl.kubernetes.io/default-container: manager
        olm.operatorGroup: global-operators
        olm.operatorNamespace: openshift-operators
        olm.skipRange: '>=4.2.0 <4.20.0-78.stable'
        olm.targetNamespaces: ""
        operatorframework.io/properties: '{"properties":[{"type":"olm.gvk","value":{"group":"ramendr.openshift.io","kind":"DRCluster","version":"v1alpha1"}},{"type":"olm.gvk","value":{"group":"ramendr.openshift.io","kind":"DRPlacementControl","version":"v1alpha1"}},{"type":"olm.gvk","value":{"group":"ramendr.openshift.io","kind":"DRPolicy","version":"v1alpha1"}},{"type":"olm.package","value":{"packageName":"odr-hub-operator","version":"4.20.0-78.stable"}}]}'
        operatorframework.io/suggested-namespace: openshift-dr-system
        operators.openshift.io/infrastructure-features: '["disconnected"]'
        operators.openshift.io/valid-subscription: '["OpenShift Platform Plus","OpenShift
          Data Foundation Essentials","OpenShift Data Foundation Advanced"]'
        operators.operatorframework.io/builder: operator-sdk-v1.41.1
        operators.operatorframework.io/project_layout: go.kubebuilder.io/v4
      creationTimestamp: null
      labels:
        app: ramen-hub
        control-plane: controller-manager
    spec:
      containers:
      - args:
        - --config=/config/ramen_manager_config.yaml
        command:
        - /manager
        env:
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        - name: OPERATOR_CONDITION_NAME
          value: odr-hub-operator.v4.20.0-78.stable
        image: registry.redhat.io/odf4/odr-rhel9-operator@sha256:1afeb70a0a046964acf11f68b44af167b2798bb1229beee58502292bf95e817e
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /healthz
            port: 8081
            scheme: HTTP
          initialDelaySeconds: 15
          periodSeconds: 20
          successThreshold: 1
          timeoutSeconds: 1
        name: manager
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /readyz
            port: 8081
            scheme: HTTP
          initialDelaySeconds: 5
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 1
        resources:
          limits:
            cpu: 100m
            memory: 300Mi
          requests:
            cpu: 100m
            memory: 200Mi
        securityContext:
          allowPrivilegeEscalation: false
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /etc/pki/ca-trust/extracted/pem
          name: ramen-manager-trustedca-vol
          readOnly: true
        - mountPath: /config
          name: ramen-manager-config-vol
          readOnly: true
      - args:
        - --secure-listen-address=0.0.0.0:8443
        - --upstream=http://127.0.0.1:9289/
        - --logtostderr=true
        - --v=10
        env:
        - name: OPERATOR_CONDITION_NAME
          value: odr-hub-operator.v4.20.0-78.stable
        image: registry.redhat.io/openshift4/ose-kube-rbac-proxy-rhel9@sha256:2a883bb2ecda1e863585803d12f8c2939dfcd747759f539f711b0562d5043e5c
        imagePullPolicy: IfNotPresent
        name: kube-rbac-proxy
        ports:
        - containerPort: 8443
          name: https
          protocol: TCP
        resources:
          limits:
            cpu: 500m
            memory: 128Mi
          requests:
            cpu: 5m
            memory: 64Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      dnsPolicy: ClusterFirst
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext:
        runAsNonRoot: true
      serviceAccount: ramen-hub-operator
      serviceAccountName: ramen-hub-operator
      terminationGracePeriodSeconds: 10
      volumes:
      - configMap:
          defaultMode: 420
          items:
          - key: ca-bundle.crt
            path: tls-ca-bundle.pem
          name: openshift-trusted-cabundle
        name: ramen-manager-trustedca-vol
      - configMap:
          defaultMode: 420
          name: ramen-hub-operator-config
        name: ramen-manager-config-vol
status:
  availableReplicas: 1
  conditions:
  - lastTransitionTime: "2025-09-02T15:09:44Z"
    lastUpdateTime: "2025-09-02T15:10:05Z"
    message: ReplicaSet "ramen-hub-operator-75d557445f" has successfully progressed.
    reason: NewReplicaSetAvailable
    status: "True"
    type: Progressing
  - lastTransitionTime: "2025-09-07T17:04:03Z"
    lastUpdateTime: "2025-09-07T17:04:03Z"
    message: Deployment has minimum availability.
    reason: MinimumReplicasAvailable
    status: "True"
    type: Available
  observedGeneration: 6
  readyReplicas: 1
  replicas: 1
  updatedReplicas: 1
